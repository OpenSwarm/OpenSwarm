\hypertarget{group__process}{}\section{Process Manages}
\label{group__process}\index{Process Manages@{Process Manages}}


Functions to create, switch, block, yield, and terminate processes and start critical sections.  


\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \hyperlink{process__Management__HDI_8c}{process\+\_\+\+Management\+\_\+\+H\+D\+I.\+c}
\begin{DoxyCompactList}\small\item\em Hardware dependent implementations to manage processes (e.\+g. task swichting) \end{DoxyCompactList}\item 
file \hyperlink{process__Management__HDI_8h}{process\+\_\+\+Management\+\_\+\+H\+D\+I.\+h}
\begin{DoxyCompactList}\small\item\em Hardware dependent implementations to manage processes (e.\+g. task swichting) \end{DoxyCompactList}\item 
file \hyperlink{data_8c}{data.\+c}
\begin{DoxyCompactList}\small\item\em This file includes all functions which are needed to manage data structures needed by the processes management. \end{DoxyCompactList}\item 
file \hyperlink{data_8h}{data.\+h}
\begin{DoxyCompactList}\small\item\em This file includes all functions which are needed to manage data structures needed by the processes management. \end{DoxyCompactList}\item 
file \hyperlink{process__Management_8c}{process\+\_\+\+Management.\+c}
\begin{DoxyCompactList}\small\item\em This file includes all functions wich are needed to manage processes (e.\+g. task swichting) \end{DoxyCompactList}\item 
file \hyperlink{process__Management_8h}{process\+\_\+\+Management.\+h}
\begin{DoxyCompactList}\small\item\em This file includes all functions wich are needed to manage processes (e.\+g. task creation, switching, termination) \end{DoxyCompactList}\item 
file \hyperlink{scheduler_8c}{scheduler.\+c}
\begin{DoxyCompactList}\small\item\em This file includes all functions wich are needed to specify a scheduling algorithm. \end{DoxyCompactList}\item 
file \hyperlink{scheduler_8h}{scheduler.\+h}
\begin{DoxyCompactList}\small\item\em This file includes all functions wich are needed to specify a scheduling algorithm. \end{DoxyCompactList}\item 
file \hyperlink{system__Timer_8c}{system\+\_\+\+Timer.\+c}
\begin{DoxyCompactList}\small\item\em This file includes all hardware dependent functions, which are nesessary to initialise, configure and run the system Time. \end{DoxyCompactList}\item 
file \hyperlink{system__Timer_8h}{system\+\_\+\+Timer.\+h}
\begin{DoxyCompactList}\small\item\em This file includes all hardware dependent functions, which are nesessary to initialise, configure and run the system Time. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Functions to create, switch, block, yield, and terminate processes and start critical sections. 

\begin{DoxyAuthor}{Author}
Stefan M. Trenkwalder \href{mailto:s.trenkwalder@openswarm.org}{\tt s.\+trenkwalder@openswarm.\+org}
\end{DoxyAuthor}
A process is a basic form to execute functions in Open\+Swarm. Open\+Swarm does not provide functions to separate memory in pages or segments due to target device architecture. Because all processes are executed in the same memory area, each process can be seen as a single thread and all threads share the same memory. A thread is just represented by a common function. One function can be executed multiple times as individual threads.

Open\+Swarm organises processes in three lists of processes (pid sorted)\+:
\begin{DoxyEnumerate}
\item running list\+: includes all processes are ready to be executed and are scheduled according to the scheduling algorithm.
\item blocked list\+: includes all processes that are waiting for events to occur.
\item Zombie list\+: includes all processes that are about to be terminated but not deleted yet.
\end{DoxyEnumerate}\hypertarget{group__process_process_usage}{}\subsection{Usage}\label{group__process_process_usage}
The process management is initialised with \hyperlink{process__Management_8h_ae2b7783ff0eedf8b5cc0fbe90ffc6a6b}{Sys\+\_\+\+Init\+\_\+\+Process\+\_\+\+Management(void)}, which generated the System Thread (pid\+: 0) and initialises all data structures. After initialising, the following functions are available. \hypertarget{group__process_process_usercode}{}\subsubsection{User code\+:}\label{group__process_process_usercode}

\begin{DoxyEnumerate}
\item Processes are started and terminated with \hyperlink{process__Management_8h_a0833f904557c4c9b39b4cf5c1e43586f}{Sys\+\_\+\+Start\+\_\+\+Process(p\+Function function)} and \hyperlink{process__Management_8h_a724935e8f908ee565ff779e7ba5dfc67}{Sys\+\_\+\+Kill\+\_\+\+Process(uint16 pid)} respectively.
\item A Process can be yield with \hyperlink{process__Management_8h_afea22f7c15161f12a5b108b3795da332}{Sys\+\_\+\+Yield(void)} and remains in the ready list. The process can be rescheduled by the scheduler.
\item A thread/process can be suspended while waiting for arriving events with \hyperlink{process__Management_8h_a9f0893d1c6a5ffb1f954737fc3a8904f}{Sys\+\_\+\+Wait\+\_\+\+For\+\_\+\+Event(uint16 event\+I\+D)} and \hyperlink{process__Management_8h_a5730456418e6d0dd9392522ec8153aec}{Sys\+\_\+\+Wait\+\_\+\+For\+\_\+\+Condition(uint16 event\+I\+D, p\+Condition\+Function function)}. Processes that are suspended are on the block list and are not rescheduled whilst in it. 
\end{DoxyEnumerate}\hypertarget{group__process_process_internal}{}\subsubsection{Internal function (shouldn\textquotesingle{}t be used by the user)}\label{group__process_process_internal}
\hypertarget{group__process_process_scheduling}{}\paragraph{Scheduling (functions to decide which process is executed at which time)}\label{group__process_process_scheduling}
Functions can be found regarding the scheduling process can be found in \hyperlink{scheduler_8h}{scheduler.\+h} and \hyperlink{process__Management_8h}{process\+\_\+\+Management.\+h}.
\begin{DoxyItemize}
\item The executing process can be switched by using \hyperlink{process__Management_8h_a212e8074575988bbe55cefd52a9ae504}{Sys\+\_\+\+Switch\+\_\+\+Process(uint16 pid)} and \hyperlink{process__Management_8h_aed6f39a867fac05effd63289b304ced1}{Sys\+\_\+\+Switch\+\_\+to\+\_\+next\+\_\+\+Process(void)}.
\item To implement a new scheduling algorithm, struct \hyperlink{structsys__scheduler__info__s}{sys\+\_\+scheduler\+\_\+info\+\_\+s}, a function to implement the algorithm (void function(void)), and a function to set the values of the struct (void \hyperlink{scheduler_8h_a8992c7e866ac510c5db6ac1f1b00f324}{Sys\+\_\+\+Set\+\_\+\+Defaults\+\_\+\+Info(sys\+\_\+scheduler\+\_\+info $\ast$sct)}) needs to be implemented (fund in \hyperlink{scheduler_8h}{scheduler.\+h}). 
\end{DoxyItemize}\hypertarget{group__process_process_timer}{}\paragraph{System Timer (timer to start the scheduling, found in system\+\_\+\+Timer.\+h)\+:}\label{group__process_process_timer}

\begin{DoxyEnumerate}
\item The System Timer needs to be initialised and started by \hyperlink{system__Timer_8h_a43fb10a158f96d4512ffa1fdddfe28ec}{Sys\+\_\+\+Init\+\_\+\+System\+Timer(p\+Function)} and \hyperlink{system__Timer_8h_afc0f400adea75936546abe01771ee9b2}{Sys\+\_\+\+Start\+\_\+\+System\+Timer(void)} respectively (these functions are used when the process Management is initialised and started).
\item It can be stopped, continued, and reset by \hyperlink{system__Timer_8c_a2c6bd2b2521ccaeeae10827c5e626f84}{Sys\+\_\+\+Stop\+\_\+\+System\+Timer()}, \hyperlink{system__Timer_8c_ab2fcca740eab21a9412fc9ec44aa7c69}{Sys\+\_\+\+Continue\+\_\+\+System\+Timer()}, and \hyperlink{system__Timer_8c_adae83d87319518b33a7cdd6e01adc546}{Sys\+\_\+\+Reset\+\_\+\+System\+Timer()} respectively.
\item The timer can be disabled and enabled (no interrupts) by \hyperlink{system__Timer_8h_a038b8f0be088220d0aabc6a13a4769e3}{Sys\+\_\+\+Disable\+\_\+\+Timer\+Interrupt(void)} and \hyperlink{system__Timer_8h_a27a2d4e84310e08b6b8e50c5e7b9cb2b}{Sys\+\_\+\+Enable\+\_\+\+Timer\+Interrupt(void)}.
\item To force a system timer and therefore an scheduling process, \hyperlink{system__Timer_8c_a8ea6aac01f3a93fbbe5b5d03f35b23bd}{Sys\+\_\+\+Force\+\_\+\+Timer\+Interrupt()} will cause the system timer interrupt to occur. 
\end{DoxyEnumerate}\hypertarget{group__process_process_event}{}\paragraph{Process Event handling (functions to store/process events with it\textquotesingle{}s subscribed process and add/remove subscriptions) \textbackslash{}sa events}\label{group__process_process_event}

\begin{DoxyItemize}
\item Event subscription to a process can be added and removed by Sys\+\_\+\+Add\+\_\+\+Event\+\_\+\+Subscription and Sys\+\_\+\+Remove\+\_\+\+Event\+\_\+\+Subscription.
\item Removing all subscription to any process of a singe event can be done \hyperlink{process__Management_8h_a67190fffc18b7864f1cdc6813c944738}{Sys\+\_\+\+Remove\+\_\+\+All\+\_\+\+Event\+\_\+\+Subscriptions(uint16 event\+I\+D)}.
\item To copy the data of an occurred event to a specific process, Sys\+\_\+\+Add\+\_\+\+Event\+\_\+to\+\_\+\+Process can be used.
\item All stored data is processed by its registered event handler by Sys\+\_\+\+Execute\+\_\+\+All\+\_\+\+Event\+Handler.
\item The event data can be cleared with Sys\+\_\+\+Clear\+\_\+\+Event\+Data.
\end{DoxyItemize}\hypertarget{group__process_process_example}{}\subsection{Example}\label{group__process_process_example}

\begin{DoxyCode}
\textcolor{preprocessor}{#include "\hyperlink{system_8h}{os/system.h}"}
\textcolor{preprocessor}{#include "\hyperlink{events_8h}{os/events/events.h}"}
\textcolor{preprocessor}{#include "\hyperlink{process__Management_8h}{os/processes/process\_Management.h}"}

\textcolor{preprocessor}{#define WAIT\_FOR\_ME 0x0F}

\hyperlink{process__Management_8c_a9f0893d1c6a5ffb1f954737fc3a8904f}{Sys\_Wait\_For\_Event}(\hyperlink{definitions_8h_a05f6b0ae8f6a6e135b0e290c25fe0e4e}{uint16} eventID)

\textcolor{keywordtype}{void} thread(\textcolor{keywordtype}{void})\{\textcolor{comment}{//thread definition}
      \textcolor{keywordflow}{while}(ture)\{
          \textcolor{comment}{//do something as an thread}
          \hyperlink{structsys__event__data__s}{sys\_event\_data} * data = \hyperlink{process__Management_8c_a9f0893d1c6a5ffb1f954737fc3a8904f}{Sys\_Wait\_For\_Event}(WAIT\_FOR\_ME);
          \hyperlink{data_8c_a4ce23b19b4229d1d0ba38d45a9f36bf8}{Sys\_Clear\_EventData}(data);
      \}
\}

\textcolor{keywordtype}{int} main(\textcolor{keywordtype}{void})\{
 \textcolor{comment}{//initialise some global or local variables}

 \textcolor{keywordtype}{int} variable;

    \hyperlink{system_8c_a31ce626d506c2b262ecf5b23946f522f}{Sys\_Init\_Kernel}();

 \hyperlink{events_8c_a386acd8573c1118d80986721664d2689}{Sys\_Register\_Event}(WAIT\_FOR\_ME);
     
 \hyperlink{system_8c_a2e15518324643f26cb240108259b30da}{Sys\_Start\_Kernel}();      
    \textcolor{keywordflow}{while}(1)\{

     \textcolor{keywordflow}{if}( condition )\{
          \hyperlink{events_8c_a24dadcefc1b4c45c50fb351efc8e841c}{Sys\_Send\_Event}(WAIT\_FOR\_ME, &variable, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));
     \}
     \textcolor{comment}{//do something}
    \}
\}
\end{DoxyCode}
\hypertarget{group__process_process_license}{}\subsection{License}\label{group__process_process_license}
L\+I\+C\+E\+N\+S\+E\+: adapted Free\+B\+S\+D License (see \href{http://openswarm.org/license}{\tt http\+://openswarm.\+org/license})~\newline
Copyright (c) 2015, Stefan M. Trenkwalder~\newline
All rights reserved. 