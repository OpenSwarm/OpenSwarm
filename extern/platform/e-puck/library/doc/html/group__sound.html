<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>e-puck: Sound</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">e-puck
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle">
<div class="title">Sound</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:e__sound_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__sound_8c.html">e_sound.c</a></td></tr>
<tr class="memdesc:e__sound_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Package to play basics sounds on the e-puck's speaker. <br />
 For more info look at this: <a class="el" href="group__sound.html">Sound</a>. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__sound_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__sound_8h.html">e_sound.h</a></td></tr>
<tr class="memdesc:e__sound_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Package to play basics sounds on the e-puck's speaker. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>The e-puck has got a speaker on his top. This package is made to take advantage of it, by playing little sample.</p>
<h1><a class="anchor" id="organisation_sec"></a>
Package organization</h1>
<p>The internals functions of this package are written in assembler, because of speed. The sound you can play is in the file codec/e_const_sound.s</p>
<p>The externals functions are located in the file <a class="el" href="e__sound_8c.html" title="Package to play basics sounds on the e-puck&#39;s speaker.   For more info look at this: Sound...">codec/e_sound.c</a>. There are three functions: <a class="el" href="e__sound_8h.html#af1ae008216a0241870c10fc7e9690e75">e_init_sound(void)</a>, <a class="el" href="e__sound_8h.html#ae40a7b9ffe85e130e4639982f5ad5189">e_play_sound(int sound_offset, int sound_length)</a> and void <a class="el" href="e__sound_8h.html#a9287b965aab6eff33f5fc6b6ddfdd251" title="Disable the sound After that you can&#39;t play sound anymore, if you want to, you have to call e_init_so...">e_close_sound(void)</a>. When you want to play a sound YOU HAVE TO call <a class="el" href="e__sound_8h.html#af1ae008216a0241870c10fc7e9690e75">e_init_sound(void)</a> at first, but only the first time. <br />
 To play a sound call <a class="el" href="e__sound_8h.html#ae40a7b9ffe85e130e4639982f5ad5189">e_play_sound(int sound_offset, int sound_length)</a>. This function takes two parameters, the first set the begining of the sound, the second set the length of the sound. In fact it works like this:</p><ul>
<li>The "sound" which is in the file codec/e_const_sound.s is placed somewhere in e-puck's memory.</li>
<li>When you call the function <a class="el" href="e__sound_8h.html#ae40a7b9ffe85e130e4639982f5ad5189">e_play_sound(int sound_offset, int sound_length)</a>, the words are sent to the DCI one by one from the offset you have specified with the first parameter. The number of words sent are specified with the second parameter.</li>
</ul>
<p>If you don't want to use the sound anymore call e_close_sound. </p><dl class="section warning"><dt>Warning</dt><dd>If you call void <a class="el" href="e__sound_8h.html#a9287b965aab6eff33f5fc6b6ddfdd251" title="Disable the sound After that you can&#39;t play sound anymore, if you want to, you have to call e_init_so...">e_close_sound(void)</a>, you have to recall e<a class="el" href="e__sound_8h.html#af1ae008216a0241870c10fc7e9690e75">e_init_sound(void)</a> to play sound again.</dd></dl>
<h1><a class="anchor" id="cmd_sec"></a>
Sounds plage</h1>
<p>In the file codec/e_const_sound.s there are 19044 words. Five sounds are organized as following [begining, length]:</p><ul>
<li>[0, 2112]: "haa"</li>
<li>[2116, 1760]: "spaah"</li>
<li>[3878, 3412]: "ouah"</li>
<li>[7294, 3732]: "yaouh"</li>
<li>[11028, 8016]: "wouaaaaaaaah"</li>
</ul>
<p>Then if you want to play the "yaouh" sound from the begining to the end just write this: e_play_sound(7294, 3732);</p>
<p>A little exemple which plays the five sounds one by one. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="e__sound_8h.html">codec/e_sound.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="e__init__port_8h.html">motor_led/e_init_port.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="e__init__port_8c.html#adfbc5ab390328c5cf8f9821cae0e56c3">e_init_port</a>();</div>
<div class="line">        <a class="code" href="e__sound_8c.html#af1ae008216a0241870c10fc7e9690e75">e_init_sound</a>();</div>
<div class="line">        <span class="keywordflow">while</span>(1)</div>
<div class="line">        {</div>
<div class="line">                <span class="keywordtype">long</span> <a class="code" href="_epuck_get_data_8m.html#a36b31afa28128c21a08d33169650d8b8">i</a>;</div>
<div class="line">                <a class="code" href="e__sound_8c.html#a9e11124c84f90ff4291187fa909fd557">e_play_sound</a>(0, 2112); <span class="comment">//sound 1</span></div>
<div class="line">                <span class="keywordflow">for</span>(i=0; i&lt;4000000; i++) {<span class="keyword">asm</span>(<span class="stringliteral">&quot;nop&quot;</span>);}</div>
<div class="line">                <a class="code" href="e__sound_8c.html#a9e11124c84f90ff4291187fa909fd557">e_play_sound</a>(2116, 1760); <span class="comment">//sound 2</span></div>
<div class="line">                <span class="keywordflow">for</span>(i=0; i&lt;4000000; i++) {<span class="keyword">asm</span>(<span class="stringliteral">&quot;nop&quot;</span>);}</div>
<div class="line">                <a class="code" href="e__sound_8c.html#a9e11124c84f90ff4291187fa909fd557">e_play_sound</a>(3878, 3412); <span class="comment">//sound 3</span></div>
<div class="line">                <span class="keywordflow">for</span>(i=0; i&lt;4000000; i++) {<span class="keyword">asm</span>(<span class="stringliteral">&quot;nop&quot;</span>);}</div>
<div class="line">                <a class="code" href="e__sound_8c.html#a9e11124c84f90ff4291187fa909fd557">e_play_sound</a>(7294, 3732); <span class="comment">//sound 4</span></div>
<div class="line">                <span class="keywordflow">for</span>(i=0; i&lt;4000000; i++) {<span class="keyword">asm</span>(<span class="stringliteral">&quot;nop&quot;</span>);}</div>
<div class="line">                <a class="code" href="e__sound_8c.html#a9e11124c84f90ff4291187fa909fd557">e_play_sound</a>(11028, 8016); <span class="comment">//sound 5</span></div>
<div class="line">                <span class="keywordflow">for</span>(i=0; i&lt;4000000; i++) {<span class="keyword">asm</span>(<span class="stringliteral">&quot;nop&quot;</span>);}</div>
<div class="line">        }</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Code: Michael Bonani <br />
 Doc: Jonathan Besuchet </dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
