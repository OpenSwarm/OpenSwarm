<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>e-puck: Ports, motors and LEDs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">e-puck
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle">
<div class="title">Ports, motors and LEDs</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:e__agenda_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html">e_agenda.c</a></td></tr>
<tr class="memdesc:e__agenda_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the agendas (timer2) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__agenda_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8h.html">e_agenda.h</a></td></tr>
<tr class="memdesc:e__agenda_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the agendas (timer2) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:advance__one__timer_2e__led_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="advance__one__timer_2e__led_8c.html">e_led.c</a></td></tr>
<tr class="memdesc:advance__one__timer_2e__led_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the LEDs with blinking possibility (timer2). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:advance__one__timer_2e__led_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="advance__one__timer_2e__led_8h.html">e_led.h</a></td></tr>
<tr class="memdesc:advance__one__timer_2e__led_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the LEDs with blinking possibility (timer2). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:advance__one__timer_2e__motors_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="advance__one__timer_2e__motors_8c.html">e_motors.c</a></td></tr>
<tr class="memdesc:advance__one__timer_2e__motors_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the motors (with timer2) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:advance__one__timer_2e__motors_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="advance__one__timer_2e__motors_8h.html">e_motors.h</a></td></tr>
<tr class="memdesc:advance__one__timer_2e__motors_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the motors (with timer2) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__remote__control_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__remote__control_8c.html">e_remote_control.c</a></td></tr>
<tr class="memdesc:e__remote__control_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the IR receiver module (timer2) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__remote__control_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__remote__control_8h.html">e_remote_control.h</a></td></tr>
<tr class="memdesc:e__remote__control_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the LEDs with blinking possibility (timer2). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__remote__control_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__remote__control_8h.html">e_remote_control.h</a></td></tr>
<tr class="memdesc:e__remote__control_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the LEDs with blinking possibility (timer2). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__agenda__fast_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda__fast_8c.html">e_agenda_fast.c</a></td></tr>
<tr class="memdesc:e__agenda__fast_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the fast agendas (timer1, 2, 3). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__agenda__fast_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda__fast_8h.html">e_agenda_fast.h</a></td></tr>
<tr class="memdesc:e__agenda__fast_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the fast agendas (timer1, 2, 3). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:advance__one__timer_2fast__agenda_2e__led_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="advance__one__timer_2fast__agenda_2e__led_8c.html">e_led.c</a></td></tr>
<tr class="memdesc:advance__one__timer_2fast__agenda_2e__led_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the LEDs with blinking possibility (timer1, 2, 3). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:advance__one__timer_2fast__agenda_2e__led_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="advance__one__timer_2fast__agenda_2e__led_8h.html">e_led.h</a></td></tr>
<tr class="memdesc:advance__one__timer_2fast__agenda_2e__led_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the LEDs with blinking possibility (timer1, 2, 3). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:advance__one__timer_2fast__agenda_2e__motors_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="advance__one__timer_2fast__agenda_2e__motors_8c.html">e_motors.c</a></td></tr>
<tr class="memdesc:advance__one__timer_2fast__agenda_2e__motors_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the motors (with timer1, 2, 3) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:advance__one__timer_2fast__agenda_2e__motors_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="advance__one__timer_2fast__agenda_2e__motors_8h.html">e_motors.h</a></td></tr>
<tr class="memdesc:advance__one__timer_2fast__agenda_2e__motors_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the motors (with timer1, 2, 3) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__epuck__ports_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__epuck__ports_8h.html">e_epuck_ports.h</a></td></tr>
<tr class="memdesc:e__epuck__ports_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define all the usefull names corresponding of e-puck's hardware. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__init__port_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__init__port_8c.html">e_init_port.c</a></td></tr>
<tr class="memdesc:e__init__port_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the ports on standard configuration. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__init__port_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__init__port_8h.html">e_init_port.h</a></td></tr>
<tr class="memdesc:e__init__port_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the ports on standard configuration. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__led_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__led_8c.html">e_led.c</a></td></tr>
<tr class="memdesc:e__led_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the LEDs. <br />
 A little exemple for the LEDs (all the LEDs are blinking) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__led_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__led_8h.html">e_led.h</a></td></tr>
<tr class="memdesc:e__led_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the LEDs. <br />
 A little exemple for the LEDs (all the LEDs are blinking) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__motors_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__motors_8c.html">e_motors.c</a></td></tr>
<tr class="memdesc:e__motors_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the motors (with timer 4 and 5). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__motors_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__motors_8h.html">e_motors.h</a></td></tr>
<tr class="memdesc:e__motors_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manage the motors (with timer 4 and 5). <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__motors__timer3_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__motors__timer3_8c.html">e_motors_timer3.c</a></td></tr>
<tr class="memdesc:e__motors__timer3_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the ports on standard configuration. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:e__motors__timer3_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__motors__timer3_8c.html">e_motors_timer3.c</a></td></tr>
<tr class="memdesc:e__motors__timer3_8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the ports on standard configuration. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="intro_sec_motors"></a>
Introduction</h1>
<p>This package contains all the resources you need to control the ports, the motors, the LED and the IR receiver of the e-puck.</p>
<h2><a class="anchor" id="intro_subsec1_ports"></a>
Ports</h2>
<p>The standard port's name of the p30F6014A microcontroller is not explicit in the e-puck context, so we need to redefine these names to make them more user friendly. <br />
 This work is made in the file: <a class="el" href="e__epuck__ports_8h.html" title="Define all the usefull names corresponding of e-puck&#39;s hardware. ">e_epuck_ports.h</a>.</p>
<h2><a class="anchor" id="intro_subsec2_motors"></a>
Motors</h2>
<p>The e-puck has two step by step motors called MOTOR1 (left) and MOTOR2 (right). To control the changing phase's sequence of these motors we need to use timers. Four possibilities are offered to you:</p><ul>
<li>standard: we use the timer4 for MOTOR2 and timer5 for MOTOR1. This solution is exploited by the file library\motor_led\e_motors.c.</li>
<li>one timer standard: we use the timer3 for both MOTOR1 and MOTOR2. This solution is exploited by the file library\motor_led\e_motors_timer3.c</li>
<li>advance one timer: we use the timer2 for both MOTOR1 and MOTOR2, but this time the mechanism work on the agenda method (see below or <a class="el" href="e__agenda_8h.html" title="Manage the agendas (timer2) ">e_agenda.h</a> for more information about agenda). This solution is exploited by the file library\motor_led\advance_one_timer\e_motors.c.</li>
<li>fast agenda: we use the timer1,2,3 for both MOTOR1 and MOTOR2, but this time the mechanism work on the fast_agenda method (see below or <a class="el" href="e__agenda__fast_8h.html" title="Manage the fast agendas (timer1, 2, 3). ">e_agenda_fast.h</a> for more information about fast_agenda). This solution is exploited by the file library\motor_led\advance_one_timer\fast_agenda\e_motors.c.</li>
</ul>
<h2><a class="anchor" id="intro_subsec3_led"></a>
LED</h2>
<p>The e-puck has 8 reds LEDs, a front LED and a body LED. All the functions needed to control these LEDs are in the file library\motor_led\e_led.c. This file is made for basics use. If you want blinking functions you have to work with these following files: library\motor_led\advance_one_timer\e_led.c or library\motor_led\advance_one_timer\fast_agenda\e_led.c. In the case you will work with agenda solution (see below or <a class="el" href="e__agenda_8h.html" title="Manage the agendas (timer2) ">e_agenda.h</a> or <a class="el" href="e__agenda__fast_8h.html" title="Manage the fast agendas (timer1, 2, 3). ">e_agenda_fast.h</a> for more information about agenda or fast agenda).</p>
<h2><a class="anchor" id="intro_subsec4_ir"></a>
IR remote</h2>
<p>The e-puck has a IR receptor. To control this receptor look at this file: library\motor_led\advance_one_timer\e_remote_control.c. </p><dl class="section warning"><dt>Warning</dt><dd>The IR remote uses the agenda solution, then it use timer2 (see below or <a class="el" href="e__agenda_8h.html" title="Manage the agendas (timer2) ">e_agenda.h</a> for more information about agenda).</dd></dl>
<h1><a class="anchor" id="timer_sect_timer"></a>
Timer's problems</h1>
<p>The p30F6014A microcontroller has five timers. The camera's package uses the timer4 and the timer5, so we can't exploit them to make the motors work when we want to use the camera. For this reason we can't use the standard solution above. </p><dl class="section warning"><dt>Warning</dt><dd>If you are using the camera, you have to work with one of this three solutions explained above:<ul>
<li>one timer standard</li>
<li>advance one timer</li>
<li>fast agenda</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="agenda_sect_agenda"></a>
Agenda solution</h1>
<p>As we have seen, we can use the agenda solution to make the motors work. <br />
 <br />
 So what is an agenda ? <br />
 An agenda is a structure which can launch a specific function (called callback function) with a given intervals. The agenda structure is made to work as chained list. <br />
 <br />
 How it works ? <br />
 You create an agenda by specifying:</p><ul>
<li>the callback function you will call</li>
<li>the delay between two calls</li>
<li>the next element of the chained list</li>
</ul>
<p>On each timer overflow all the agenda chained list is scanned and if an agenda in the list has reached the delay, then the callback function is called. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="e__agenda_8c.html" title="Manage the agendas (timer2) ">e_agenda.c</a>, <a class="el" href="e__agenda__fast_8c.html" title="Manage the fast agendas (timer1, 2, 3). ">e_agenda_fast.c</a></dd></dl>
<dl class="section author"><dt>Author</dt><dd>Doc: Jonathan Besuchet </dd></dl>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
