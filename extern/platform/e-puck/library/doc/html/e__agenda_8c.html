<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>e-puck: motor_led/advance_one_timer/e_agenda.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">e-puck
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_69303d5f9250cc0cd67152e52aa2fe7e.html">motor_led</a></li><li class="navelem"><a class="el" href="dir_726f0997cbd02baa5627d339e0fe8e6a.html">advance_one_timer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">e_agenda.c File Reference<div class="ingroups"><a class="el" href="group__motor___l_e_d.html">Ports, motors and LEDs</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Manage the agendas (timer2)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="e__agenda_8h.html">e_agenda.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="e__epuck__ports_8h.html">../e_epuck_ports.h</a>&quot;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae73ebe3bed25b37556b570d7e81722c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#ae73ebe3bed25b37556b570d7e81722c5">EXIT_OK</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ae73ebe3bed25b37556b570d7e81722c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad54182362fe997bb2122a391bad52323"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#ad54182362fe997bb2122a391bad52323">e_start_agendas_processing</a> (void)</td></tr>
<tr class="memdesc:ad54182362fe997bb2122a391bad52323"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the agendas processing.  <a href="#ad54182362fe997bb2122a391bad52323">More...</a><br /></td></tr>
<tr class="separator:ad54182362fe997bb2122a391bad52323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7edb1893889be619f706f9f79cf54817"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#a7edb1893889be619f706f9f79cf54817">e_end_agendas_processing</a> (void)</td></tr>
<tr class="memdesc:a7edb1893889be619f706f9f79cf54817"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop all the agendas.  <a href="#a7edb1893889be619f706f9f79cf54817">More...</a><br /></td></tr>
<tr class="separator:a7edb1893889be619f706f9f79cf54817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61f859f200c4877ab942af3884838379"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#a61f859f200c4877ab942af3884838379">e_activate_agenda</a> (void(*func)(void), int cycle)</td></tr>
<tr class="memdesc:a61f859f200c4877ab942af3884838379"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activate an agenda.  <a href="#a61f859f200c4877ab942af3884838379">More...</a><br /></td></tr>
<tr class="separator:a61f859f200c4877ab942af3884838379"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e7efa985f5e0ae59815082d0cfd2d6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#af5e7efa985f5e0ae59815082d0cfd2d6">e_destroy_agenda</a> (void(*func)(void))</td></tr>
<tr class="memdesc:af5e7efa985f5e0ae59815082d0cfd2d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy an agenda.  <a href="#af5e7efa985f5e0ae59815082d0cfd2d6">More...</a><br /></td></tr>
<tr class="separator:af5e7efa985f5e0ae59815082d0cfd2d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b08749f3a6ccc4cf338abf8ab49845"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#ab5b08749f3a6ccc4cf338abf8ab49845">e_set_agenda_cycle</a> (void(*func)(void), int cycle)</td></tr>
<tr class="memdesc:ab5b08749f3a6ccc4cf338abf8ab49845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the cycle value of an agenda.  <a href="#ab5b08749f3a6ccc4cf338abf8ab49845">More...</a><br /></td></tr>
<tr class="separator:ab5b08749f3a6ccc4cf338abf8ab49845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a561493b88bf2f528e29caad95bcf5e00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#a561493b88bf2f528e29caad95bcf5e00">e_reset_agenda</a> (void(*func)(void))</td></tr>
<tr class="memdesc:a561493b88bf2f528e29caad95bcf5e00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset an agenda's counter.  <a href="#a561493b88bf2f528e29caad95bcf5e00">More...</a><br /></td></tr>
<tr class="separator:a561493b88bf2f528e29caad95bcf5e00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a7765df88af34b8b589dc49aa3d818"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#af6a7765df88af34b8b589dc49aa3d818">e_pause_agenda</a> (void(*func)(void))</td></tr>
<tr class="memdesc:af6a7765df88af34b8b589dc49aa3d818"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pause an agenda.  <a href="#af6a7765df88af34b8b589dc49aa3d818">More...</a><br /></td></tr>
<tr class="separator:af6a7765df88af34b8b589dc49aa3d818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a625633eabf9997ed1305fdb3510038f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#a625633eabf9997ed1305fdb3510038f2">e_restart_agenda</a> (void(*func)(void))</td></tr>
<tr class="memdesc:a625633eabf9997ed1305fdb3510038f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restart an agenda previously paused.  <a href="#a625633eabf9997ed1305fdb3510038f2">More...</a><br /></td></tr>
<tr class="separator:a625633eabf9997ed1305fdb3510038f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a348b663f86a656f5ea991d496ff9b896"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#a348b663f86a656f5ea991d496ff9b896">__attribute__</a> ((interrupt, auto_psv))</td></tr>
<tr class="memdesc:a348b663f86a656f5ea991d496ff9b896"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt from timer2.  <a href="#a348b663f86a656f5ea991d496ff9b896">More...</a><br /></td></tr>
<tr class="separator:a348b663f86a656f5ea991d496ff9b896"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad88e3e886f12c96c35e4a9ac98a09ae0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="e__agenda_8h.html#ac5fcf8d01892e627363302a34dae461a">Agenda</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="e__agenda_8c.html#ad88e3e886f12c96c35e4a9ac98a09ae0">agenda_list</a> = 0</td></tr>
<tr class="separator:ad88e3e886f12c96c35e4a9ac98a09ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manage the agendas (timer2) </p>
<p>This module manage the agendas with the timer2. <br />
 <br />
 An agenda is a structure made to work as chained list. It containts: the function you want to launch, the time setup between two launching events, a counter to measure the current time, a pointer to the next element of the list. <br />
 <br />
 Each times the timer2 has an interrupt, all the agenda chained list is scanned to look if an agenda has to be treated according to the cycle value and current counter value. <br />
 <br />
 If one (or more) agenda has to be treated, his callback function is launch. </p><dl class="section author"><dt>Author</dt><dd>Code: Francesco Mondada, Lucas Meier <br />
 Doc: Jonathan Besuchet </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ae73ebe3bed25b37556b570d7e81722c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXIT_OK&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a348b663f86a656f5ea991d496ff9b896"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(interrupt, auto_psv)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt from timer2. </p>
<p>Parse the chained list of agenda. <br />
 Increment counter only. <br />
 Check if agenda has to be treated according to the cycle value and current counter value. <br />
 Do it for number of cycle positive or null. <br />
 Check if a service has to be activated. </p>

</div>
</div>
<a class="anchor" id="a61f859f200c4877ab942af3884838379"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int e_activate_agenda </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cycle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Activate an agenda. </p>
<p>Activate an agenda and allocate memory for him if there isn't already an agenda with the same callback function (the agenda is active but isn't processed if he has a null cycle value). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>function called if the cycle value is reached by the counter </td></tr>
    <tr><td class="paramname">cycle</td><td>cycle value in millisec/10 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="e__agenda__fast_8c.html#ae73ebe3bed25b37556b570d7e81722c5">EXIT_OK</a> if the agenda has been created, exit the programme otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="af5e7efa985f5e0ae59815082d0cfd2d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int e_destroy_agenda </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy an agenda. </p>
<p>Destroy the agenda with a given callback function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>function to test </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="e__agenda__fast_8c.html#ae73ebe3bed25b37556b570d7e81722c5">EXIT_OK</a> if the agenda has been destroyed, <a class="el" href="e__agenda__fast_8h.html#ad57ebd29c3b0f3a04921b852641ea89f">AG_NOT_FOUND</a> otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a7edb1893889be619f706f9f79cf54817"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void e_end_agendas_processing </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop all the agendas. </p>
<p>Stop all the agendas by disabling Timer2 </p><dl class="section warning"><dt>Warning</dt><dd>the memory allocated for the agenda isn't freed, use <a class="el" href="e__agenda__fast_8h.html#af5e7efa985f5e0ae59815082d0cfd2d6">e_destroy_agenda</a>(void (*func)(void)) for that. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="e__agenda_8c.html#af5e7efa985f5e0ae59815082d0cfd2d6" title="Destroy an agenda. ">e_destroy_agenda</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af6a7765df88af34b8b589dc49aa3d818"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int e_pause_agenda </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pause an agenda. </p>
<p>Pause an agenda but do not reset its information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>function to pause </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="e__agenda__fast_8c.html#ae73ebe3bed25b37556b570d7e81722c5">EXIT_OK</a> the agenda has been paused, <a class="el" href="e__agenda__fast_8h.html#ad57ebd29c3b0f3a04921b852641ea89f">AG_NOT_FOUND</a> otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a561493b88bf2f528e29caad95bcf5e00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int e_reset_agenda </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset an agenda's counter. </p>
<p>Reset an agenda's counter with a given callback function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>function to reset </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="e__agenda__fast_8c.html#ae73ebe3bed25b37556b570d7e81722c5">EXIT_OK</a> if the cycle of the agenda has been reseted, <a class="el" href="e__agenda__fast_8h.html#ad57ebd29c3b0f3a04921b852641ea89f">AG_NOT_FOUND</a> otherwise </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function RESET the agenda, if you just want a pause tell <a class="el" href="e__agenda__fast_8h.html#af6a7765df88af34b8b589dc49aa3d818">e_pause_agenda</a>(void (*func)(void)) </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="e__agenda_8c.html#af6a7765df88af34b8b589dc49aa3d818" title="Pause an agenda. ">e_pause_agenda</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a625633eabf9997ed1305fdb3510038f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int e_restart_agenda </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restart an agenda previously paused. </p>
<p>Restart an agenda previously paused. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>function to restart </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="e__agenda__fast_8c.html#ae73ebe3bed25b37556b570d7e81722c5">EXIT_OK</a> if he agenda has been restarted, <a class="el" href="e__agenda__fast_8h.html#ad57ebd29c3b0f3a04921b852641ea89f">AG_NOT_FOUND</a> otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="e__agenda_8c.html#af6a7765df88af34b8b589dc49aa3d818" title="Pause an agenda. ">e_pause_agenda</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ab5b08749f3a6ccc4cf338abf8ab49845"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int e_set_agenda_cycle </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cycle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the cycle value of an agenda. </p>
<p>Change the cycle value of an agenda with a given callback function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>function to test </td></tr>
    <tr><td class="paramname">cycle</td><td>new cycle value in millisec/10 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="e__agenda__fast_8c.html#ae73ebe3bed25b37556b570d7e81722c5">EXIT_OK</a> if the cycle of the agenda has been modified, <a class="el" href="e__agenda__fast_8h.html#ad57ebd29c3b0f3a04921b852641ea89f">AG_NOT_FOUND</a> otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ad54182362fe997bb2122a391bad52323"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void e_start_agendas_processing </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the agendas processing. </p>
<p>Start the agendas processing by starting the Timer2. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ad88e3e886f12c96c35e4a9ac98a09ae0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="e__agenda_8h.html#ac5fcf8d01892e627363302a34dae461a">Agenda</a>* agenda_list = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>pointer on the end of agenda chained list </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
